{% extends "keyform/base.html" %}
{% load static %}
{% load i18n %}

{% block javascript %}
    {{ block.super }}
    <script type="text/javascript" src="{% static 'keyform/js/add_form.js' %}"></script>
{% endblock %}
{% block css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'keyform/css/add_form.css' %}"/>
{% endblock %}

{% block content %}
    <form method=POST>
        {% csrf_token %}
        <div class="row">
            <div class="column">
                <div class="field-wrapper">
                    <table id="keyform_table" width="100%">
                        <tr>
                            <td>
                                {{ form.request_formset.management_form }}
                                {{ form.building.errors }}
                                {{ form.building.label_tag }}
                            </td>
                            <td>
                                {{ form.building }}
                            </td>
                            <td align="right"> 
                                {{ form.bpn.errors }}
                                {{ form.bpn.label_tag }}
                            </td>
                            <td>
                                {{ form.bpn }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{ form.student_name.errors }}
                                {{ form.student_name.label_tag }}
                            </td>
                            <td colspan="6">
                                {{ form.student_name }}
                            </td>
                        </tr>
                    </table>
                    <div id="form-set">
                        {% for keydata_form in form.request_formset.forms %}
                            {% include 'keyform/keydata_form.html' with include_buttons=True %}
                        {% endfor %}
                    </div>
                    <div id="empty_form" style="display:none">
                        <div class="keydata-form">
                            {% include 'keyform/keydata_form.html' with keydata_form=form.request_formset.empty_form %}
                        </div>
                    </div>
                    <table>
                        <tr>
                            <td>
                                {{ form.reason_for_request.errors }}
                                {{ form.reason_for_request.label_tag }}
                                {{ form.reason_for_request }}
                            </td>
                            <td align="left">
                                {{ form.payment_method.errors }}
                                {{ form.payment_method.label_tag }}
                                {{ form.payment_method }}
                            </td>
                            <tr>
                                <td>
                                    {{ form.amt_received.errors }}
                                    {{ form.amt_received.label_tag }}
                                </td>
                                <td colspan="6">
                                    {{ form.amt_received }}
                                </td>
                                <tr>
                                    <td>
                                        {{ form.charge_amount.errors }}
                                        {{ form.charge_amount.label_tag }}
                                    </td>
                                    <td colspan="6">
                                        {{ form.charge_amount }}
                                    </td>
                                </tr>
                                <td>
                                    {{ form.charged_on_rcr.errors }}
                                    {{ form.charged_on_rcr.label_tag }}
                                </td>
                                <td>
                                    {{ form.charged_on_rcr }}
                                </td>
                            </tr>
                        </tr>
                    </table>
                </div>
                <input type="submit"/>
            </div>
        </div>
    </form>
{% endblock %}
